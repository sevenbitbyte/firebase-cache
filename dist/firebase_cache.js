var firebase_cache=function(e){function t(s){if(r[s])return r[s].exports;var n=r[s]={exports:{},id:s,loaded:!1};return e[s].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var s={RefStore:r(4),Ref:r(3),Model:r(7)};e.exports=s},function(e,t){e.exports=hoek},function(e,t){e.exports=joi},function(e,t,r){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),i=r(2),a=r(1),o=(r(6),r(5)),h=r(4),l=function(){function e(t){s(this,e),console.log("ref - "+t.path);var r=i.object().keys({store:i.object().type(h.constructor).required(),path:i.string().regex(new RegExp("^(.*/)")).required(),ref:i.any(),queryObj:i.any(),autoOff:i["boolean"]()}),n=i.validate(t,r);if(n.error)throw n.error;this.store=t.store,this.ref=t.ref,this.path=t.path,this.queryObj=t.queryObj,this.autoOff=void 0!=t.autoOff&&null!=t.autoOff?t.autoOff:this.store.autoOff,this._data=void 0,this.error=void 0,
//! Client callbacks
this.callbacks={error:[],data:[]},this.events=new o,this.events.setMaxListeners(50),this.handlers={value:!1,child_added:!1,child_removed:!1,child_changed:!1,child_moved:!1},this.stats={created:new Date,lastRead:void 0,//! Time data was delivered to a listener
lastUpdateStart:void 0,//! Last time an update started
lastUpdate:void 0,//! Last time an update finished
lastIdle:void 0}}return n(e,[{key:"purge",value:function(){console.error("purge - "+this.path);for(var e in this.handlers)this.handlers[e]&&this._disconnectHandler(e),this.events.removeAllListeners(e);this.store.purge(this.path),this._data=null,this.ref=null,this.store=null,this.events=null,delete this.ref,delete this.store,delete this._data,delete this.events}},{key:"_handle_error",value:function(e){this.error=e,console.error("_handle_error - "+this.path),console.error(this),this.events.emit("error",{error:e,ref:this})}},{key:"_handle_on_value",value:function(e){console.log("_handle_on_value - "+this.path),this._data=e.val(),this.stats.lastUpdate=new Date,this.store.logEvent(this.path,"snapshot"),this.events.emit("data",{ref:this,type:"value",args:{val:e.val(),snapshot:e}})}},{key:"on",value:function(e,t){if(!this.callbacks[e])throw"Unsupported event type["+e+"]";
//! Connect internal handlers
return this.events.listeners(e).indexOf(t)==-1&&this.events.on(e,t),"data"==e&&(this._connectHandler("value"),this.stats.lastUpdateStart=new Date),t}},{key:"off",value:function(e,t){if(!this.callbacks[e])throw"Unsupported event type["+e+"]";var r=this.events.listeners(e).indexOf(t);r!=-1&&this.events.removeListener(e,t),"data"==e&&0==this.events.listenerCount(e)&&this.autoOff&&(
//! Connect internal handlers
this._disconnectHandler("value"),this.stats.lastIdle=new Date)}},{key:"_connectHandler",value:function(e){if(!this.handlers[e]){var t=a.reach(this,"_handle_on_"+e);this.ref.on(e,t,this._handle_error.bind(this),this),this.handlers[e]=!0}}},{key:"_disconnectHandler",value:function(e){if(this.handlers[e]){var t=a.reach(this,"_handle_on_"+e);this.ref.off(e,t,this),this.handlers[e]=!1}}},{key:"once",value:function(e,t){var r=this;this.on(e,function(){r.off(e,t)}),this.on(e,t)}},{key:"val",value:function(){return this._data?(this.store.logEvent(this.path,"read"),this.stats.lastRead=new Date,this._data):null}},{key:"data",value:function(e,t){var r=this;return this._data?void setTimeout(function(){e({ref:r,type:"cache"})},0):(this.once("data",e),this.once("error",t),void this.once("data",function(){r.off("error",t)}))}},{key:"push",value:function(e,t){return this._data=e,this.store.logEvent(this.path,"push"),this.store.nativeRef(this.path).push(e,t)}},{key:"set",value:function(e,t){return this._data=e,this.store.logEvent(this.path,"set"),this.store.nativeRef(this.path).set(e,t)}},{key:"remove",value:function(e){return this._data=null,this.store.logEvent(this.path,"remove"),this.store.nativeRef(this.path).remove(e)}},{key:"prev",value:function(){if("$key"==a.reach(this.queryObj,"orderBy",{"default":"$key"})){var e=Object.keys(this._data);if(e.length>0){var t={endAt:e[0],limitToLast:a.reach(this.queryObj,"limitToLast",{"default":25})};return this.store.query(this.path,t)}}else if("$value"==a.reach(this.queryObj,"orderBy"));else if("$priority"==a.reach(this.queryObj,"orderBy"));else if("string"==typeof a.reach(this.queryObj,"orderBy")){({endAt:this._data[0][this.queryObj.orderBy],orderBy:this.queryObj.orderBy,limitToLast:a.reach(this.queryObj,"limitToLast",{"default":25})});return this.store.query(this.path,nextQueryObj)}}},{key:"next",value:function(){if(console.log(this),"$key"==a.reach(this.queryObj,"orderBy")){var e=Object.keys(this._data);if(e.length>0){var t=e[e.length-1],r={orderBy:"$key",startAt:t,limitToFirst:a.reach(this.queryObj,"limitToFirst",{"default":25})};return this.store.query(this.path,r)}}}}]),e}();e.exports=l},function(e,t,r){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),i=r(2),a=r(13),o=(r(1),r(3)),h=r(8),l=function(){function e(t,r){s(this,e),this.autoOff=void 0==r||r,this.enableRateLog=!0,this.enableCounters=!0,this.firebase=t,this.refs={},//! Map of [refPath] -> Ref
this.nativeRefs={},//! Map of [refPath] -> firebase.Database.Ref
this.queries={},//! Map of [queryPath] -> firebase.Database.Query
this.nativeQueries={},//! Map of [queryPath] -> firebase.Database.Query
this.counters={}}return n(e,[{key:"counter",value:function(e){return this.enableCounters?void(this.counters[e]||(this.counters[e]=new h({rate:this.enableRateLog}))):null}},{key:"logEvent",value:function(e,t){var r=this.counters(e);r&&r.countEvent(t)}},{key:"ref",value:function(e){var t=a.parse(e,!0),r=t.pathname;return t.query&&Object.keys(t.query).length>0?this.query(r,t.query):this.hasRef(r)?this.refs[r]:(this.nativeRefs[r]=this.firebase.database().ref(r),this.refs[r]=new o({store:this,path:r,ref:this.nativeRefs[r]}),this.refs[r])}},{key:"query",value:function(t,r){console.log("query");var s=a.parse(t,!0),n=e.parseQueryPath(t,r),i=e.queryToQueryString(s,n);if(this.hasQuery(s,n))return this.queries[i];var h=this.nativeQuery(t,n);return this.queries[i]=new o({store:this,path:i,ref:h,queryObj:n}),this.queries[i]}},{key:"purge",value:function(e){this.hasQuery(e)&&(this.queries[e]=null,this.nativeQueries[e]=null,delete this.queries[e],delete this.nativeQueries[e]),this.hasRef(e)&&(this.refs[e]=null,this.nativeRefs[e]=null,delete this.refs[e],delete this.nativeRefs[e])}},{key:"nativeRef",value:function(e){var t=a.parse(e,!0),r=t.pathname;if((!e||e.length<1)&&(r="/",console.log("root request")),t.query&&Object.keys(t.query).length>0)return this.nativeQuery(r,t.query);if(this.nativeRefs[r])return this.nativeRefs[r];if(this.nativeRefs[r]=this.firebase.database().ref(r),null==this.nativeRefs[r])throw"WTF?";return this.nativeRefs[r]}},{key:"nativeQuery",value:function(t,r){var s=a.parse(t,!0),n=e.parseQueryPath(t,r),i=e.queryToQueryString(s,n);if(this.nativeQueries[i])return this.nativeQueries[i];var o=this.firebase.database().ref(s.pathname);console.log(i);for(var h in n){var l=n[h];switch(h){case"orderBy":console.log("orderBy"),console.log(l),o="$key"==l?o.orderByKey():"$priority"==l?o.orderByPriority():"$value"==l?o.orderByValue():o.orderByChild(l);break;case"limitToFirst":o=o.limitToFirst(l);break;case"limitToLast":o=o.limitToLast(l);break;case"startAt":console.log("startAt"),console.log(l),o="string"==typeof l?o.startAt(l):o.startAt(l.value,l.key);break;case"endAt":o="string"==typeof l?o.endAt(l):o.endAt(l.value,l.key);break;case"equalTo":o=o.equalTo(l.value,l.key);break;default:throw"Invalid query operation["+h+"]"}}return this.nativeQueries[i]=o,this.nativeQueries[i]}},{key:"hasRef",value:function(e){var t=a.parse(e,!0),r=t.pathname;return this.refs[r]&&this.refs[r]instanceof o}},{key:"hasQuery",value:function(t,r){var s=a.parse(t,!0),n=e.parseQueryPath(t,r),i=e.queryToQueryString(s,n);return this.queries[i]&&this.queries[i]instanceof o}}],[{key:"parseQueryPath",value:function(e,t){var r=a.parse(e,!0),s=t?t:r.query,n=i.object().keys({orderBy:i.string(),limitToFirst:i.number().integer().max(200),limitToLast:i.number().integer().max(200),startAt:i.alternatives()["try"](i.string(),i.object().keys({value:i.string(),key:i.string()})),endAt:i.string(),equalTo:i.string()}).nand("limitToFirst","limitToLast"),o=i.validate(s,n);if(s=o.value,o.error)throw console.log(o),console.log(t),o.error;
//! NOTE: Defaults to limitToFirst 25 items
return s.limitToLast||s.limitToFirst||(s.limitToFirst=25),s}},{key:"queryToQueryString",value:function(e,t){var r=a.format({pathname:e.pathname,query:t?t:e.query}),s=r.indexOf("startAt=&");if(s!=-1){console.log(s);var n="startAt=".length,i=encodeURIComponent("("+t.startAt.key+","+t.startAt.value+")");r=r.slice(0,s+n)+i+r.slice(s+n),console.log("startAt")}return r}}]),e}();e.exports=l},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function n(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!n(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,n,o,h,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(r=this._events[e],a(r))return!1;if(s(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(i(r))for(o=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,h=0;h<n;h++)l[h].apply(this,o);return!0},r.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,n,a,o;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,n=-1,r===t||s(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(o=a;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){n=o;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],s(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){e.exports=lodash},function(e,t,r){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),i=r(1),a=(r(15),r(6)),o=r(5),h=function(){function e(t){s(this,e),this.fields={},this.params={},//! Map of params[ 'profileID' ] = -K-A4F3GDGF5F4dvtHrt5r etc
this.events=new o,this.events.setMaxListeners(100),this.path="model://"+t,this.events=new o}return n(e,[{key:"createField",value:function(e,t,r){var s=this.fields[e],n=s&&s.handler,i=s?Object.keys(s.handler):[];this.fields[e]={name:e,source:t,path:t.path,type:r?r:"once",data:t.val()?t.val():null,datatype:null,handler:{},lastUpdate:void 0};var a=this.fields[e].type;switch(a){case"on":case"once":case"data":case"val":case"offline":break;default:throw"Invalid field type["+a+"]"}if(n&&s.source&&"on"==s.type&&"on"==a)for(var o in i)this._connectHandler(i[o],s)}},{key:"removeField",value:function(e){var t=this.fields[e],r=t&&t.handler,s=t?Object.keys(t.handler):[];if(r)for(var n in s)this._disconnectHandler(s[n],t);this.fields[e]=null,delete this.fields[e]}},{key:"field",value:function(e){return this.fields[e]}},{key:"fieldBySource",value:function(e){return a.find(this.fields,function(t,r){return t.source==e})}},{key:"_handle_error",value:function(e){}},{key:"_handle_on_data",value:function(e){console.log("model._handle_on_data"),console.log(e);var t=this.fieldBySource(e.ref);t.data=e.ref.val(),t.datatype=e.type,t.lastUpdate=new Date,"offline"!=t.type&&(t.handler.data&&"data"==t.type&&(t.handler.data=!1),this.events.emit("data."+t.name,{model:this,field:t.name,type:t.datatype}),this.events.emit("data",{model:this,field:t.name,type:t.datatype}))}},{key:"_handle_on_error",value:function(e){console.error(e);var t=i.reach(this.fieldBySource(event.ref),"name");t&&(this.error[t]=e.error),f.handler.data&&"data"==f.type&&(f.handler.data=!1),this.events.emit("error"+(t?"."+t:""),{model:this,field:t,error:e.error})}},{key:"purge",value:function(){for(var e in this.fields){var t=this.fields[e];t.source&&(this._disconnectHandler("data",t),this._disconnectHandler("error",t),t.source.purge(),t.source=null,delete t.source)}}},{key:"on",value:function(e,t){var r=e.split(".");if("data"!=r[0]&&"error"!=r[0])throw"Unsupported event type["+e+"]";this.events.listeners(e).indexOf(t)==-1&&this.events.on(e,t);var s=function(e){var t=this;if(e.source&&"on"==e.type)this._connectHandler(r[0],e);else if(e.source&&"once"==e.type&&!e.data){var s=i.reach(this,"_handle_on_"+r[0]);e.source.once(r[0],s,this._handle_error.bind(this),this)}else e.source&&"data"==r[0]&&"data"==e.type&&!e.data?this._connectDataHandler(r[0],e):e.source&&"data"==r[0]&&"val"==e.type&&!e.data&&setTimeout(function(){t._handle_on_data({ref:e.source,type:"cache"})})};if(r.length>1&&"*"!=r[1])s(this.field(r[1]));else for(var n in this.fields)s(this.fields[n])}},{key:"_connectHandler",value:function(e,t){if(!t.handler[e]){var r=i.reach(this,"_handle_on_"+e);t.source.on(e,r,this._handle_error.bind(this),this),t.handler[e]=!0}}},{key:"_connectDataHandler",value:function(e,t){console.log("_connectDataHandler - "+e),t.handler[e]||(t.source.data(this._handle_on_data.bind(this),this._handle_error.bind(this)),t.handler[e]=!0)}},{key:"_disconnectHandler",value:function(e,t){if(t.handler[e]){var r=i.reach(this,"_handle_on_"+e);t.source.off(e,r,this),t.handler[e]=!1}}},{key:"off",value:function(e,t){var r=e.split(".");if("data"!=r[0]&&"error"!=r[0])throw"Unsupported event type["+e+"]";if(this.events.listeners(e).indexOf(t)!=-1&&this.events.removeListener(e,t),r.length>1&&"*"!=r[1]){var s=this.field(r[1]);if(s.source&&"on"==s.type){var n=Math.max(this.events.listenerCount(e),this.events.listenerCount(r[0]));n<1&&(console.log("handler cleanup "+e),this._disconnectHandler(r[0],s))}}else for(var i in this.fields){var a=this.fields[i];if(a.source&&"on"==a.type){var o=Math.max(this.events.listenerCount(e),this.events.listenerCount(r[0]));o<1&&(console.log("handler cleanup "+e),this._disconnectHandler(r[0],a))}}}},{key:"once",value:function(e,t){var r=this;this.on(e,function(){r.off(e,t)}),this.on(e,t)}},{key:"val",value:function(){var e={};for(var t in this.fields){var r=this.fields[t];e[t]=r.data}return e}},{key:"data",value:function(e,t){var r=this,s=[];for(var n in this.fields)this.fields[n].data||"offline"==this.fields[n].type||s.push(this.fields[n]);return s.length<1?(console.log("no diff"),void setTimeout(function(){e({model:r,field:"",type:"cache"})},0)):(console.log("model.once"),this.once("data",e),this.once("error",t),void this.once("data",function(){r.off("error",t)}))}},{key:"prev",value:function(e){var t=this,r=this.field(e),s=r.source.prev();if(this.createField(e,s,r.type),r=this.field(e),r.source&&"once"==r.type&&!r.data){var n=i.reach(this,"_handle_on_"+eventTokens[0]);r.source.once("data",n,this._handle_error.bind(this),this)}else r.source&&"data"==r.type&&!r.data?r.source.data(this._handle_on_data.bind(this),this._handle_error.bind(this)):r.source&&"val"==r.type&&!r.data&&setTimeout(function(){t._handle_on_data({ref:r.source,type:"cache"})})}},{key:"next",value:function(e,t,r){var s=this,n=this.field(e),a=n.source.next();if(console.log(a),this.createField(e,a,n.type),n=this.field(e),n.source&&"once"==n.type&&!n.data){var o=i.reach(this,"_handle_on_"+eventTokens[0]);n.source.once("data",o,this._handle_error.bind(this),this)}else n.source&&"data"==n.type&&!n.data?(console.log("f.source.data"),this._connectDataHandler("data",n)):n.source&&"val"==n.type&&!n.data&&setTimeout(function(){s._handle_on_data({ref:n.source,type:"cache"})})}}]),e}();e.exports=h},function(e,t,r){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),i=r(2);(function(){function e(t){s(this,e);var r=i.object().keys({rate:i["boolean"]().optional()["default"](!1)}),n=i.validate(t,r);if(n.err)throw n.err;this.options=n.value,this.counters={},this.timestamp=this.options.rate?{}:void 0,this.rateMs=this.options.rate?{}:void 0,this.avgRateMs=this.options.rate?{}:void 0}return n(e,[{key:"countEvent",value:function(e){if(this.counters[e]){if(this.counters[e]++,this.options.rate){var t=(new Date).getTime(),r=this.rateMs[e];this.rateMs[e]=t-this.timestamp[e],this.avgRateMs[e]=(r+this.rateMs)/2}}else this.counters[e]=1,this.options.rate&&(this.timestamp[e]=(new Date).getTime(),this.rateMs[e]=0,this.avgRateMs[e]=0)}}]),e})()},function(e,t){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,s,n){t=t||"&",s=s||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;n&&"number"==typeof n.maxKeys&&(o=n.maxKeys);var h=e.length;o>0&&h>o&&(h=o);for(var l=0;l<h;++l){var u,c,f,v,d=e[l].replace(a,"%20"),p=d.indexOf(s);p>=0?(u=d.substr(0,p),c=d.substr(p+1)):(u=d,c=""),f=decodeURIComponent(u),v=decodeURIComponent(c),r(i,f)?Array.isArray(i[f])?i[f].push(v):i[f]=[i[f],v]:i[f]=v}return i}},function(e,t){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,s,n){return t=t||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(n){var i=encodeURIComponent(r(n))+s;return Array.isArray(e[n])?e[n].map(function(e){return i+encodeURIComponent(r(e))}).join(t):i+encodeURIComponent(r(e[n]))}).join(t):n?encodeURIComponent(r(n))+s+encodeURIComponent(r(e)):""}},function(e,t,r){"use strict";t.decode=t.parse=r(9),t.encode=t.stringify=r(10)},function(e,t,r){var s;(function(e,n){!function(i){function a(e){throw RangeError(E[e])}function o(e,t){for(var r=e.length,s=[];r--;)s[r]=t(e[r]);return s}function h(e,t){var r=e.split("@"),s="";r.length>1&&(s=r[0]+"@",e=r[1]),e=e.replace(C,".");var n=e.split("."),i=o(n,t).join(".");return s+i}function l(e){for(var t,r,s=[],n=0,i=e.length;n<i;)t=e.charCodeAt(n++),t>=55296&&t<=56319&&n<i?(r=e.charCodeAt(n++),56320==(64512&r)?s.push(((1023&t)<<10)+(1023&r)+65536):(s.push(t),n--)):s.push(t);return s}function u(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=Q(e>>>10&1023|55296),e=56320|1023&e),t+=Q(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:k}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function v(e,t,r){var s=0;for(e=r?I(e/j):e>>1,e+=I(e/t);e>U*x>>1;s+=k)e=I(e/U);return I(s+(U+1)*e/(e+q))}function d(e){var t,r,s,n,i,o,h,l,f,d,p=[],y=e.length,m=0,_=L,g=O;for(r=e.lastIndexOf(A),r<0&&(r=0),s=0;s<r;++s)e.charCodeAt(s)>=128&&a("not-basic"),p.push(e.charCodeAt(s));for(n=r>0?r+1:0;n<y;){for(i=m,o=1,h=k;n>=y&&a("invalid-input"),l=c(e.charCodeAt(n++)),(l>=k||l>I((b-m)/o))&&a("overflow"),m+=l*o,f=h<=g?w:h>=g+x?x:h-g,!(l<f);h+=k)d=k-f,o>I(b/d)&&a("overflow"),o*=d;t=p.length+1,g=v(m-i,t,0==i),I(m/t)>b-_&&a("overflow"),_+=I(m/t),m%=t,p.splice(m++,0,_)}return u(p)}function p(e){var t,r,s,n,i,o,h,u,c,d,p,y,m,_,g,q=[];for(e=l(e),y=e.length,t=L,r=0,i=O,o=0;o<y;++o)p=e[o],p<128&&q.push(Q(p));for(s=n=q.length,n&&q.push(A);s<y;){for(h=b,o=0;o<y;++o)p=e[o],p>=t&&p<h&&(h=p);for(m=s+1,h-t>I((b-r)/m)&&a("overflow"),r+=(h-t)*m,t=h,o=0;o<y;++o)if(p=e[o],p<t&&++r>b&&a("overflow"),p==t){for(u=r,c=k;d=c<=i?w:c>=i+x?x:c-i,!(u<d);c+=k)g=u-d,_=k-d,q.push(Q(f(d+g%_,0))),u=I(g/_);q.push(Q(f(u,0))),i=v(r,m,s==n),r=0,++s}++r,++t}return q.join("")}function y(e){return h(e,function(e){return T.test(e)?d(e.slice(4).toLowerCase()):e})}function m(e){return h(e,function(e){return R.test(e)?"xn--"+p(e):e})}var _=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof n&&n);_.global!==_&&_.window!==_&&_.self!==_||(i=_);var g,b=2147483647,k=36,w=1,x=26,q=38,j=700,O=72,L=128,A="-",T=/^xn--/,R=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=k-w,I=Math.floor,Q=String.fromCharCode;g={version:"1.3.2",ucs2:{decode:l,encode:u},decode:d,encode:p,toASCII:m,toUnicode:y},s=function(){return g}.call(t,r,t,e),!(void 0!==s&&(e.exports=s))}(this)}).call(t,r(14)(e),function(){return this}())},function(e,t,r){function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(e,t,r){if(e&&l(e)&&e instanceof s)return e;var n=new s;return n.parse(e,t,r),n}function i(e){return h(e)&&(e=n(e)),e instanceof s?e.format():s.prototype.format.call(e)}function a(e,t){return n(e,!1,!0).resolve(t)}function o(e,t){return e?n(e,!1,!0).resolveObject(t):t}function h(e){return"string"==typeof e}function l(e){return"object"==typeof e&&null!==e}function u(e){return null===e}function c(e){return null==e}var f=r(12);t.parse=n,t.resolve=a,t.resolveObject=o,t.format=i,t.Url=s;var v=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","\t"],y=["{","}","|","\\","^","`"].concat(p),m=["'"].concat(y),_=["%","/","?",";","#"].concat(m),g=["/","?","#"],b=255,k=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},q={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=r(11);s.prototype.parse=function(e,t,r){if(!h(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e;s=s.trim();var n=v.exec(s);if(n){n=n[0];var i=n.toLowerCase();this.protocol=i,s=s.substr(n.length)}if(r||n||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===s.substr(0,2);!a||n&&q[n]||(s=s.substr(2),this.slashes=!0)}if(!q[n]&&(a||n&&!j[n])){for(var o=-1,l=0;l<g.length;l++){var u=s.indexOf(g[l]);u!==-1&&(o===-1||u<o)&&(o=u)}var c,d;d=o===-1?s.lastIndexOf("@"):s.lastIndexOf("@",o),d!==-1&&(c=s.slice(0,d),s=s.slice(d+1),this.auth=decodeURIComponent(c)),o=-1;for(var l=0;l<_.length;l++){var u=s.indexOf(_[l]);u!==-1&&(o===-1||u<o)&&(o=u)}o===-1&&(o=s.length),this.host=s.slice(0,o),s=s.slice(o),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var y=this.hostname.split(/\./),l=0,L=y.length;l<L;l++){var A=y[l];if(A&&!A.match(k)){for(var T="",R=0,C=A.length;R<C;R++)T+=A.charCodeAt(R)>127?"x":A[R];if(!T.match(k)){var E=y.slice(0,l),U=y.slice(l+1),I=A.match(w);I&&(E.push(I[1]),U.unshift(I[2])),U.length&&(s="/"+U.join(".")+s),this.hostname=E.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var Q=this.hostname.split("."),H=[],l=0;l<Q.length;++l){var B=Q[l];H.push(B.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(B):B)}this.hostname=H.join(".")}var F=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+F,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!x[i])for(var l=0,L=m.length;l<L;l++){var P=m[l],D=encodeURIComponent(P);D===P&&(D=escape(P)),s=s.split(P).join(D)}var S=s.indexOf("#");S!==-1&&(this.hash=s.substr(S),s=s.slice(0,S));var $=s.indexOf("?");if($!==-1?(this.search=s.substr($),this.query=s.substr($+1),t&&(this.query=O.parse(this.query)),s=s.slice(0,$)):t&&(this.search="",this.query={}),s&&(this.pathname=s),j[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",B=this.search||"";this.path=F+B}return this.href=this.format(),this},s.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",s=this.hash||"",n=!1,i="";this.host?n=e+this.host:this.hostname&&(n=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(i=O.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||j[t])&&n!==!1?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),s&&"#"!==s.charAt(0)&&(s="#"+s),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+n+r+a+s},s.prototype.resolve=function(e){return this.resolveObject(n(e,!1,!0)).format()},s.prototype.resolveObject=function(e){if(h(e)){var t=new s;t.parse(e,!1,!0),e=t}var r=new s;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),j[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!j[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||q[e.protocol])r.pathname=e.pathname;else{for(var n=(e.pathname||"").split("/");n.length&&!(e.host=n.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),r.pathname=n.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var i=r.pathname||"",a=r.search||"";r.path=i+a}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var o=r.pathname&&"/"===r.pathname.charAt(0),l=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=l||o||r.host&&e.pathname,v=f,d=r.pathname&&r.pathname.split("/")||[],n=e.pathname&&e.pathname.split("/")||[],p=r.protocol&&!j[r.protocol];if(p&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===n[0]?n[0]=e.host:n.unshift(e.host)),e.host=null),f=f&&(""===n[0]||""===d[0])),l)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,d=n;else if(n.length)d||(d=[]),d.pop(),d=d.concat(n),r.search=e.search,r.query=e.query;else if(!c(e.search)){if(p){r.hostname=r.host=d.shift();var y=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");y&&(r.auth=y.shift(),r.host=r.hostname=y.shift())}return r.search=e.search,r.query=e.query,u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var m=d.slice(-1)[0],_=(r.host||e.host)&&("."===m||".."===m)||""===m,g=0,b=d.length;b>=0;b--)m=d[b],"."==m?d.splice(b,1):".."===m?(d.splice(b,1),g++):g&&(d.splice(b,1),g--);if(!f&&!v)for(;g--;g)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),_&&"/"!==d.join("/").substr(-1)&&d.push("");var k=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(p){r.hostname=r.host=k?"":d.length?d.shift():"";var y=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");y&&(r.auth=y.shift(),r.host=r.hostname=y.shift())}return f=f||r.host&&d.length,f&&!k&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},s.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){e.exports=async}]);
//# sourceMappingURL=firebase_cache.js.map
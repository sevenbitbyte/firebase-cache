var firebase_cache=function(e){function t(n){if(r[n])return r[n].exports;var s=r[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var n={RefStore:r(3),Ref:r(2),Model:r(7)};e.exports=n},function(e,t){e.exports=hoek},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(5),a=r(1),o=(r(6),r(4)),h=r(3),l=function(){function e(t){n(this,e),console.log("ref - "+t.path);var r=i.object().keys({store:i.object().type(h.constructor).required(),path:i.string().regex(new RegExp("^(.*/)")).required(),ref:i.any(),queryObj:i.any(),autoOff:i["boolean"]()}),s=i.validate(t,r);if(s.error)throw s.error;this.store=t.store,this.ref=t.ref,this.path=t.path,this.queryObj=t.queryObj,this.autoOff=void 0!=t.autoOff&&null!=t.autoOff?t.autoOff:this.store.autoOff,this._data=void 0,this.error=void 0,
//! Client callbacks
this.callbacks={error:[],data:[]},this.events=new o,this.events.setMaxListeners(50),this.handlers={value:!1,child_added:!1,child_removed:!1,child_changed:!1,child_moved:!1},this.stats={created:new Date,lastRead:void 0,//! Time data was delivered to a listener
lastUpdateStart:void 0,//! Last time an update started
lastUpdate:void 0,//! Last time an update finished
lastIdle:void 0,counters:{read:0,save:0}}}return s(e,[{key:"purge",value:function(){console.error("purge - "+this.path);for(var e in this.handlers)this.handlers[e]&&this._disconnectHandler(e),this.events.removeAllListeners(e);this.store.purge(this.path),this._data=null,this.ref=null,this.store=null,delete this.ref,delete this.store,delete this._data}},{key:"_handle_error",value:function(e){this.error=e,console.error("_handle_error - "+this.path),console.error(this),this.events.emit("error",{error:e,ref:this})}},{key:"_handle_on_value",value:function(e){console.log("_handle_on_value - "+this.path),this._data=e.val(),this.stats.lastUpdate=new Date,this.events.emit("data",{ref:this,type:"value",args:{val:e.val(),snapshot:e}})}},{key:"on",value:function(e,t){if(!this.callbacks[e])throw"Unsupported event type["+e+"]";
//! Connect internal handlers
return this.events.listeners(e).indexOf(t)==-1&&this.events.on(e,t),"data"==e&&(this._connectHandler("value"),this.stats.lastUpdateStart=new Date),t}},{key:"off",value:function(e,t){if(!this.callbacks[e])throw"Unsupported event type["+e+"]";var r=this.events.listeners(e).indexOf(t);r!=-1&&this.events.removeListener(e,t),"data"==e&&0==this.events.listenerCount(e)&&this.autoOff&&(
//! Connect internal handlers
this._disconnectHandler("value"),this.stats.lastIdle=new Date)}},{key:"_connectHandler",value:function(e){if(!this.handlers[e]){var t=a.reach(this,"_handle_on_"+e);this.ref.on(e,t,this._handle_error.bind(this),this),this.handlers[e]=!0}}},{key:"_disconnectHandler",value:function(e){if(this.handlers[e]){var t=a.reach(this,"_handle_on_"+e);this.ref.off(e,t,this),this.handlers[e]=!1}}},{key:"once",value:function(e,t){var r=this;this.on(e,function(){r.off(e,t)}),this.on(e,t)}},{key:"val",value:function(){return this._data?(this.stats.counters.read++,this.stats.lastRead=new Date,this._data):null}},{key:"data",value:function(e,t){var r=this;return this._data?void setTimeout(function(){e({ref:r,type:"cache"})},0):(this.once("data",e),this.once("error",t),void this.once("data",function(){r.off("error",t)}))}},{key:"push",value:function(){}},{key:"prev",value:function(){if("$key"==a.reach(this.queryObj,"orderBy",{"default":"$key"})){var e=Object.keys(this._data);if(e.length>0){({endAt:e[0],limitToLast:a.reach(this.queryObj,"limitToLast",{"default":25})});return this.store.query(this.path,nextQueryObj)}}else if("$value"==a.reach(this.queryObj,"orderBy"));else if("$priority"==a.reach(this.queryObj,"orderBy"));else if("string"==typeof a.reach(this.queryObj,"orderBy")){({endAt:this._data[0][this.queryObj.orderBy],orderBy:this.queryObj.orderBy,limitToLast:a.reach(this.queryObj,"limitToLast",{"default":25})});return this.store.query(this.path,nextQueryObj)}}},{key:"next",value:function(){if(console.log(this),"$key"==a.reach(this.queryObj,"orderBy")){var e=Object.keys(this._data);if(e.length>0){var t=e[e.length-1],r={orderBy:"$key",startAt:t,limitToFirst:a.reach(this.queryObj,"limitToFirst",{"default":25})};return this.store.query(this.path,r)}}}}]),e}();e.exports=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(5),a=r(12),o=(r(1),r(2)),h=function(){function e(t,r){n(this,e),this.autoOff=void 0==r||r,this.firebase=t,this.refs={},//! Map of [refPath] -> Ref
this.nativeRefs={},//! Map of [refPath] -> firebase.Database.Ref
this.queries={},//! Map of [queryPath] -> firebase.Database.Query
this.nativeQueries={}}return s(e,[{key:"ref",value:function(e){var t=a.parse(e,!0),r=t.pathname;return t.query&&Object.keys(t.query).length>0?this.query(r,t.query):this.hasRef(r)?this.refs[r]:(this.nativeRefs[r]=this.firebase.database().ref(r),this.refs[r]=new o({store:this,path:r,ref:this.nativeRefs[r]}),this.refs[r])}},{key:"query",value:function(t,r){console.log("query");var n=a.parse(t,!0),s=e.parseQueryPath(t,r),i=e.queryToQueryString(n,s);if(this.hasQuery(n,s))return this.queries[i];var h=this.nativeQuery(t,s);return this.queries[i]=new o({store:this,path:i,ref:h,queryObj:s}),this.queries[i]}},{key:"purge",value:function(e){this.hasQuery(e)&&(this.queries[e]=null,this.nativeQueries[e]=null,delete this.queries[e],delete this.nativeQueries[e]),this.hasRef(e)&&(this.refs[e]=null,this.nativeRefs[e]=null,delete this.refs[e],delete this.nativeRefs[e])}},{key:"nativeRef",value:function(e){var t=a.parse(e,!0),r=t.pathname;if((!e||e.length<1)&&(r="/",console.log("root request")),t.query&&Object.keys(t.query).length>0)return this.nativeQuery(r,t.query);if(this.nativeRefs[r])return this.nativeRefs[r];if(this.nativeRefs[r]=this.firebase.database().ref(r),null==this.nativeRefs[r])throw"WTF?";return this.nativeRefs[r]}},{key:"nativeQuery",value:function(t,r){var n=a.parse(t,!0),s=e.parseQueryPath(t,r),i=e.queryToQueryString(n,s);if(this.nativeQueries[i])return this.nativeQueries[i];var o=this.firebase.database().ref(n.pathname);console.log(i);for(var h in s){var l=s[h];switch(h){case"orderBy":console.log("orderBy"),console.log(l),o="$key"==l?o.orderByKey():"$priority"==l?o.orderByPriority():"$value"==l?o.orderByValue():o.orderByChild(l);break;case"limitToFirst":o=o.limitToFirst(l);break;case"limitToLast":o=o.limitToLast(l);break;case"startAt":console.log("startAt"),console.log(l),o="string"==typeof l?o.startAt(l):o.startAt(l.value,l.key);break;case"endAt":o="string"==typeof l?o.endAt(l):o.endAt(l.value,l.key);break;case"equalTo":o=o.equalTo(l.value,l.key);break;default:throw"Invalid query operation["+h+"]"}}return this.nativeQueries[i]=o,this.nativeQueries[i]}},{key:"hasRef",value:function(e){var t=a.parse(e,!0),r=t.pathname;return this.refs[r]&&this.refs[r]instanceof o}},{key:"hasQuery",value:function(t,r){var n=a.parse(t,!0),s=e.parseQueryPath(t,r),i=e.queryToQueryString(n,s);return this.queries[i]&&this.queries[i]instanceof o}}],[{key:"parseQueryPath",value:function(e,t){var r=a.parse(e,!0),n=t?t:r.query,s=i.object().keys({orderBy:i.string(),limitToFirst:i.number().integer().max(200),limitToLast:i.number().integer().max(200),startAt:i.alternatives()["try"](i.string(),i.object().keys({value:i.string(),key:i.string()})),endAt:i.string(),equalTo:i.string()}).nand("limitToFirst","limitToLast"),o=i.validate(n,s);if(n=o.value,o.error)throw console.log(o),console.log(t),o.error;
//! NOTE: Defaults to limitToFirst 25 items
return n.limitToLast||n.limitToFirst||(n.limitToFirst=25),n}},{key:"queryToQueryString",value:function(e,t){var r=a.format({pathname:e.pathname,query:t?t:e.query}),n=r.indexOf("startAt=&");if(n!=-1){console.log(n);var s="startAt=".length,i=encodeURIComponent("("+t.startAt.key+","+t.startAt.value+")");r=r.slice(0,n+s)+i+r.slice(n+s),console.log("startAt")}return r}}]),e}();e.exports=h},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function s(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,s,o,h,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(i(r))for(o=Array.prototype.slice.call(arguments,1),l=r.slice(),s=l.length,h=0;h<s;h++)l[h].apply(this,o);return!0},r.prototype.addListener=function(e,t){var s;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(s=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),s||(s=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var s=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,s,a,o;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,s=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(r)){for(o=a;o-- >0;)if(r[o]===t||r[o].listener&&r[o].listener===t){s=o;break}if(s<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){e.exports=joi},function(e,t){e.exports=lodash},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),a=(r(14),r(6)),o=r(4),h=function(){function e(t){n(this,e),this.fields={},this.params={},//! Map of params[ 'profileID' ] = -K-A4F3GDGF5F4dvtHrt5r etc
this.events=new o,this.events.setMaxListeners(100),this.path="model://"+t,this.events=new o}return s(e,[{key:"setField",value:function(e,t,r){var n=this.fields[e],s=n&&n.handler,i=n?Object.keys(n.handler):[];this.fields[e]={name:e,source:t,path:t.path,type:r?r:"once",data:t.val()?t.val():null,datatype:null,handler:{},lastUpdate:void 0};var a=this.fields[e].type;switch(a){case"on":case"once":case"data":case"val":case"offline":break;default:throw"Invalid field type["+a+"]"}if(s&&n.source&&"on"==n.type&&"on"==a)for(var o in i)this._connectHandler(i[o],n)}},{key:"removeField",value:function(e){var t=this.fields[e],r=t&&t.handler,n=t?Object.keys(t.handler):[];if(r)for(var s in n)this._disconnectHandler(n[s],t);this.fields[e]=null,delete this.fields[e]}},{key:"field",value:function(e){return this.fields[e]}},{key:"fieldBySource",value:function(e){return a.find(this.fields,function(t,r){return t.source==e})}},{key:"_handle_error",value:function(e){}},{key:"_handle_on_data",value:function(e){console.log("model._handle_on_data"),console.log(e);var t=this.fieldBySource(e.ref);t.data=e.ref.val(),t.datatype=e.type,t.lastUpdate=new Date,t.handler.data&&"data"==t.type&&(t.handler.data=!1),this.events.emit("data."+t.name,{model:this,field:t.name,type:t.datatype}),this.events.emit("data",{model:this,field:t.name,type:t.datatype})}},{key:"_handle_on_error",value:function(e){console.error(e);var t=i.reach(this.fieldBySource(event.ref),"name");t&&(this.error[t]=e.error),f.handler.data&&"data"==f.type&&(f.handler.data=!1),this.events.emit("error"+(t?"."+t:""),{model:this,field:t,error:e.error})}},{key:"purge",value:function(){for(var e in this.fields){var t=this.fields[e];t.source&&(this._disconnectHandler("data",t),this._disconnectHandler("error",t),t.source.purge(),t.source=null,delete t.source)}}},{key:"on",value:function(e,t){var r=e.split(".");if("data"!=r[0]&&"error"!=r[0])throw"Unsupported event type["+e+"]";this.events.listeners(e).indexOf(t)==-1&&this.events.on(e,t);var n=function(e){var t=this;if(e.source&&"on"==e.type)this._connectHandler(r[0],e);else if(e.source&&"once"==e.type&&!e.data){var n=i.reach(this,"_handle_on_"+r[0]);e.source.once(r[0],n,this._handle_error.bind(this),this)}else e.source&&"data"==r[0]&&"data"==e.type&&!e.data?this._connectDataHandler(r[0],e):e.source&&"data"==r[0]&&"val"==e.type&&!e.data&&setTimeout(function(){t._handle_on_data({ref:e.source,type:"cache"})})};if(r.length>1&&"*"!=r[1])n(this.field(r[1]));else for(var s in this.fields)n(this.fields[s])}},{key:"_connectHandler",value:function(e,t){if(!t.handler[e]){var r=i.reach(this,"_handle_on_"+e);t.source.on(e,r,this._handle_error.bind(this),this),t.handler[e]=!0}}},{key:"_connectDataHandler",value:function(e,t){console.log("_connectDataHandler - "+e),t.handler[e]||(t.source.data(this._handle_on_data.bind(this),this._handle_error.bind(this)),t.handler[e]=!0)}},{key:"_disconnectHandler",value:function(e,t){if(t.handler[e]){var r=i.reach(this,"_handle_on_"+e);t.source.off(e,r,this),t.handler[e]=!1}}},{key:"off",value:function(e,t){var r=e.split(".");if("data"!=r[0]&&"error"!=r[0])throw"Unsupported event type["+e+"]";if(this.events.listeners(e).indexOf(t)!=-1&&this.events.removeListener(e,t),r.length>1&&"*"!=r[1]){var n=this.field(r[1]);if(n.source&&"on"==n.type){var s=Math.max(this.events.listenerCount(e),this.events.listenerCount(r[0]));s<1&&(console.log("handler cleanup "+e),this._disconnectHandler(r[0],n))}}else for(var i in this.fields){var a=this.fields[i];if(a.source&&"on"==a.type){var o=Math.max(this.events.listenerCount(e),this.events.listenerCount(r[0]));o<1&&(console.log("handler cleanup "+e),this._disconnectHandler(r[0],a))}}}},{key:"once",value:function(e,t){var r=this;this.on(e,function(){r.off(e,t)}),this.on(e,t)}},{key:"val",value:function(){var e={};for(var t in this.fields){var r=this.fields[t];e[t]=r.data}return e}},{key:"data",value:function(e,t){var r=this,n=[];for(var s in this.fields)this.fields[s].data||"offline"==this.fields[s].type||n.push(this.fields[s]);return n.length<1?(console.log("no diff"),void setTimeout(function(){e({model:r,field:"",type:"cache"})},0)):(console.log("model.once"),this.once("data",e),this.once("error",t),void this.once("data",function(){r.off("error",t)}))}},{key:"prev",value:function(e){var t=this,r=this.field(e),n=r.source.prev();if(this.setField(e,n,r.type),r=this.field(e),r.source&&"once"==r.type&&!r.data){var s=i.reach(this,"_handle_on_"+eventTokens[0]);r.source.once("data",s,this._handle_error.bind(this),this)}else r.source&&"data"==r.type&&!r.data?r.source.data(this._handle_on_data.bind(this),this._handle_error.bind(this)):r.source&&"val"==r.type&&!r.data&&setTimeout(function(){t._handle_on_data({ref:r.source,type:"cache"})})}},{key:"next",value:function(e,t,r){var n=this,s=this.field(e),a=s.source.next();if(console.log(a),this.setField(e,a,s.type),s=this.field(e),s.source&&"once"==s.type&&!s.data){var o=i.reach(this,"_handle_on_"+eventTokens[0]);s.source.once("data",o,this._handle_error.bind(this),this)}else s.source&&"data"==s.type&&!s.data?(console.log("f.source.data"),this._connectDataHandler("data",s)):s.source&&"val"==s.type&&!s.data&&setTimeout(function(){n._handle_on_data({ref:s.source,type:"cache"})})}},{key:"push",value:function(e,t){}}]),e}();e.exports=h},function(e,t){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,s){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;s&&"number"==typeof s.maxKeys&&(o=s.maxKeys);var h=e.length;o>0&&h>o&&(h=o);for(var l=0;l<h;++l){var u,c,f,d,v=e[l].replace(a,"%20"),p=v.indexOf(n);p>=0?(u=v.substr(0,p),c=v.substr(p+1)):(u=v,c=""),f=decodeURIComponent(u),d=decodeURIComponent(c),r(i,f)?Array.isArray(i[f])?i[f].push(d):i[f]=[i[f],d]:i[f]=d}return i}},function(e,t){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(s){var i=encodeURIComponent(r(s))+n;return Array.isArray(e[s])?e[s].map(function(e){return i+encodeURIComponent(r(e))}).join(t):i+encodeURIComponent(r(e[s]))}).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""}},function(e,t,r){"use strict";t.decode=t.parse=r(8),t.encode=t.stringify=r(9)},function(e,t,r){var n;(function(e,s){!function(i){function a(e){throw RangeError(U[e])}function o(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function h(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(R,".");var s=e.split("."),i=o(s,t).join(".");return n+i}function l(e){for(var t,r,n=[],s=0,i=e.length;s<i;)t=e.charCodeAt(s++),t>=55296&&t<=56319&&s<i?(r=e.charCodeAt(s++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),s--)):n.push(t);return n}function u(e){return o(e,function(e){var t="";return e>65535&&(e-=65536,t+=E(e>>>10&1023|55296),e=56320|1023&e),t+=E(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:k}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,r){var n=0;for(e=r?Q(e/j):e>>1,e+=Q(e/t);e>I*w>>1;n+=k)e=Q(e/I);return Q(n+(I+1)*e/(e+q))}function v(e){var t,r,n,s,i,o,h,l,f,v,p=[],y=e.length,m=0,_=A,g=O;for(r=e.lastIndexOf(L),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&a("not-basic"),p.push(e.charCodeAt(n));for(s=r>0?r+1:0;s<y;){for(i=m,o=1,h=k;s>=y&&a("invalid-input"),l=c(e.charCodeAt(s++)),(l>=k||l>Q((b-m)/o))&&a("overflow"),m+=l*o,f=h<=g?x:h>=g+w?w:h-g,!(l<f);h+=k)v=k-f,o>Q(b/v)&&a("overflow"),o*=v;t=p.length+1,g=d(m-i,t,0==i),Q(m/t)>b-_&&a("overflow"),_+=Q(m/t),m%=t,p.splice(m++,0,_)}return u(p)}function p(e){var t,r,n,s,i,o,h,u,c,v,p,y,m,_,g,q=[];for(e=l(e),y=e.length,t=A,r=0,i=O,o=0;o<y;++o)p=e[o],p<128&&q.push(E(p));for(n=s=q.length,s&&q.push(L);n<y;){for(h=b,o=0;o<y;++o)p=e[o],p>=t&&p<h&&(h=p);for(m=n+1,h-t>Q((b-r)/m)&&a("overflow"),r+=(h-t)*m,t=h,o=0;o<y;++o)if(p=e[o],p<t&&++r>b&&a("overflow"),p==t){for(u=r,c=k;v=c<=i?x:c>=i+w?w:c-i,!(u<v);c+=k)g=u-v,_=k-v,q.push(E(f(v+g%_,0))),u=Q(g/_);q.push(E(f(u,0))),i=d(r,m,n==s),r=0,++n}++r,++t}return q.join("")}function y(e){return h(e,function(e){return T.test(e)?v(e.slice(4).toLowerCase()):e})}function m(e){return h(e,function(e){return C.test(e)?"xn--"+p(e):e})}var _=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof s&&s);_.global!==_&&_.window!==_&&_.self!==_||(i=_);var g,b=2147483647,k=36,x=1,w=26,q=38,j=700,O=72,A=128,L="-",T=/^xn--/,C=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,U={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=k-x,Q=Math.floor,E=String.fromCharCode;g={version:"1.3.2",ucs2:{decode:l,encode:u},decode:v,encode:p,toASCII:m,toUnicode:y},n=function(){return g}.call(t,r,t,e),!(void 0!==n&&(e.exports=n))}(this)}).call(t,r(13)(e),function(){return this}())},function(e,t,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function s(e,t,r){if(e&&l(e)&&e instanceof n)return e;var s=new n;return s.parse(e,t,r),s}function i(e){return h(e)&&(e=s(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return s(e,!1,!0).resolve(t)}function o(e,t){return e?s(e,!1,!0).resolveObject(t):t}function h(e){return"string"==typeof e}function l(e){return"object"==typeof e&&null!==e}function u(e){return null===e}function c(e){return null==e}var f=r(11);t.parse=s,t.resolve=a,t.resolveObject=o,t.format=i,t.Url=n;var d=/^([a-z0-9.+-]+:)/i,v=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","\t"],y=["{","}","|","\\","^","`"].concat(p),m=["'"].concat(y),_=["%","/","?",";","#"].concat(m),g=["/","?","#"],b=255,k=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},q={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=r(10);n.prototype.parse=function(e,t,r){if(!h(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var s=d.exec(n);if(s){s=s[0];var i=s.toLowerCase();this.protocol=i,n=n.substr(s.length)}if(r||s||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||s&&q[s]||(n=n.substr(2),this.slashes=!0)}if(!q[s]&&(a||s&&!j[s])){for(var o=-1,l=0;l<g.length;l++){var u=n.indexOf(g[l]);u!==-1&&(o===-1||u<o)&&(o=u)}var c,v;v=o===-1?n.lastIndexOf("@"):n.lastIndexOf("@",o),v!==-1&&(c=n.slice(0,v),n=n.slice(v+1),this.auth=decodeURIComponent(c)),o=-1;for(var l=0;l<_.length;l++){var u=n.indexOf(_[l]);u!==-1&&(o===-1||u<o)&&(o=u)}o===-1&&(o=n.length),this.host=n.slice(0,o),n=n.slice(o),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var y=this.hostname.split(/\./),l=0,A=y.length;l<A;l++){var L=y[l];if(L&&!L.match(k)){for(var T="",C=0,R=L.length;C<R;C++)T+=L.charCodeAt(C)>127?"x":L[C];if(!T.match(k)){var U=y.slice(0,l),I=y.slice(l+1),Q=L.match(x);Q&&(U.push(Q[1]),I.unshift(Q[2])),I.length&&(n="/"+I.join(".")+n),this.hostname=U.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var E=this.hostname.split("."),H=[],l=0;l<E.length;++l){var B=E[l];H.push(B.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(B):B)}this.hostname=H.join(".")}var F=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+F,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!w[i])for(var l=0,A=m.length;l<A;l++){var S=m[l],$=encodeURIComponent(S);$===S&&($=escape(S)),n=n.split(S).join($)}var D=n.indexOf("#");D!==-1&&(this.hash=n.substr(D),n=n.slice(0,D));var M=n.indexOf("?");if(M!==-1?(this.search=n.substr(M),this.query=n.substr(M+1),t&&(this.query=O.parse(this.query)),n=n.slice(0,M)):t&&(this.search="",this.query={}),n&&(this.pathname=n),j[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",B=this.search||"";this.path=F+B}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,i="";this.host?s=e+this.host:this.hostname&&(s=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&l(this.query)&&Object.keys(this.query).length&&(i=O.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||j[t])&&s!==!1?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+s+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(s(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(h(e)){var t=new n;t.parse(e,!1,!0),e=t}var r=new n;if(Object.keys(this).forEach(function(e){r[e]=this[e]},this),r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(r[t]=e[t])}),j[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(e.protocol&&e.protocol!==r.protocol){if(!j[e.protocol])return Object.keys(e).forEach(function(t){r[t]=e[t]}),r.href=r.format(),r;if(r.protocol=e.protocol,e.host||q[e.protocol])r.pathname=e.pathname;else{for(var s=(e.pathname||"").split("/");s.length&&!(e.host=s.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==s[0]&&s.unshift(""),s.length<2&&s.unshift(""),r.pathname=s.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var i=r.pathname||"",a=r.search||"";r.path=i+a}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var o=r.pathname&&"/"===r.pathname.charAt(0),l=e.host||e.pathname&&"/"===e.pathname.charAt(0),f=l||o||r.host&&e.pathname,d=f,v=r.pathname&&r.pathname.split("/")||[],s=e.pathname&&e.pathname.split("/")||[],p=r.protocol&&!j[r.protocol];if(p&&(r.hostname="",r.port=null,r.host&&(""===v[0]?v[0]=r.host:v.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===s[0]?s[0]=e.host:s.unshift(e.host)),e.host=null),f=f&&(""===s[0]||""===v[0])),l)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,v=s;else if(s.length)v||(v=[]),v.pop(),v=v.concat(s),r.search=e.search,r.query=e.query;else if(!c(e.search)){if(p){r.hostname=r.host=v.shift();var y=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");y&&(r.auth=y.shift(),r.host=r.hostname=y.shift())}return r.search=e.search,r.query=e.query,u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!v.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var m=v.slice(-1)[0],_=(r.host||e.host)&&("."===m||".."===m)||""===m,g=0,b=v.length;b>=0;b--)m=v[b],"."==m?v.splice(b,1):".."===m?(v.splice(b,1),g++):g&&(v.splice(b,1),g--);if(!f&&!d)for(;g--;g)v.unshift("..");!f||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),_&&"/"!==v.join("/").substr(-1)&&v.push("");var k=""===v[0]||v[0]&&"/"===v[0].charAt(0);if(p){r.hostname=r.host=k?"":v.length?v.shift():"";var y=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");y&&(r.auth=y.shift(),r.host=r.hostname=y.shift())}return f=f||r.host&&v.length,f&&!k&&v.unshift(""),v.length?r.pathname=v.join("/"):(r.pathname=null,r.path=null),u(r.pathname)&&u(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=v.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){e.exports=async}]);
//# sourceMappingURL=firebase_cache.js.map